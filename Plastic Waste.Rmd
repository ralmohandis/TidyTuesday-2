---
title: "Plastic Waste"
output:
  html_document: default
  author: Joel Soroos
---

### 1. Load packages
```{r setup, warning = FALSE, results = FALSE, message = FALSE}

library (tidyverse)
library (janitor)
library (ggthemes)
library (countrycode)

```

### 2. Get data
```{r source, warning = TRUE, results = FALSE, message = FALSE}

waste_raw <- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-05-21/per-capita-mismanaged-plastic-waste-vs-gdp-per-capita.csv") %>%
   clean_names()
   
```

### 3. Transform data
```{r transform}

waste <- waste_raw %>%
   rename (
      country_name = entity,
      country_code = code,
      waste_per_capita = per_capita_mismanaged_plastic_waste_kilograms_per_person_per_day,
      gdp_per_capita = gdp_per_capita_ppp_constant_2011_international_rate,
      population = total_population_gapminder
      )%>%
   select (country_name, waste_per_capita, gdp_per_capita) %>%
   arrange (country_name) %>%
   drop_na (waste_per_capita)

```


### 4a. Create ridgeline chart by continent
```{r plot1}

continent_plot <- student %>%
   filter (
      year == 2016,
      indicator == "Upper Secondary"
      ) %>%
   ggplot (aes(x = student_ratio, y = reorder(continent,desc(continent)), group = continent)) +
   geom_density_ridges (fill = "skyblue") +
   theme_economist() +
   labs(
      title = "Upper Secondary Student/Teacher Ratio by Continent (2016)",
      subtitle = "Oceania has the most dispersion, Europe the least.",
      caption = "\n Source:UNESCO Institute of Statistics  |  R4DS Tidy Tuesday
      Visualization: Joel Soroos (Twitter @soroosj)",
      x = "Student Teacher Ratio",
      y = "") 

ggsave ("plots/continent.png", continent_plot)

continent_plot

```

### 4b. Create ridgeline chart by indicator
```{r plot2}

indicator_plot <- student %>%
   filter (
      year == 2016,
      continent == "Asia"
      ) %>%
   ggplot (aes(x = student_ratio, y = reorder(indicator,desc(indicator)), group = indicator)) +
   geom_density_ridges (fill = "skyblue") +
   theme_economist() %>%
   labs(
      title = "Student/Teacher Ratio by Education Level in Asia (2016)",
      caption = "Source:UNESCO Institute of Statistics  |  R4DS Tidy Tuesday
      Visualization: Joel Soroos @soroosj",
      x = "",
      y = "")

ggsave ("plots/indicator.png", indicator_plot)

indicator_plot

```