---
title: "Student Ratio"
output:
  pdf_document: default
  html_document: default
---

### 1. Load packages
```{r setup, warning = FALSE, results = FALSE, message = FALSE}

library (tidyverse)
library (janitor)
library (ggthemes)
library (ggridges)

```

### 2. Source data
```{r source, warning = FALSE, results = FALSE, message = FALSE }

student_raw <- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-05-07/student_teacher_ratio.csv")%>%
   clean_names()

country_raw <- read_csv("https://pkgstore.datahub.io/JohnSnowLabs/country-and-continent-codes-list/country-and-continent-codes-list-csv_csv/data/b7876b7f496677669644f3d1069d3121/country-and-continent-codes-list-csv_csv.csv") %>%
   clean_names ()
   
```

### 3. Transform data
```{r}

country <- country_raw %>%
   rename (country_code = three_letter_country_code,
           continent = continent_name) %>%
   select (country_code, continent)

student <- 
   left_join (student_raw, country, by = "country_code") %>%
   select (continent, country_code, country, indicator, year, student_ratio) %>%
   filter (
      year == 2016,
      continent == "Asia") %>%  
   mutate (
      indicator = str_replace (indicator, " Education", ""),
      indicator = as.factor(indicator),
      indicator = fct_relevel(indicator, c("Pre-Primary", "Primary", "Lower Secondary", "Secondary", "Upper Secondary", "Tertiary", "Post-Secondary Non-Tertiary"))
      )%>%

   drop_na ()

```


### 4. Create visualization
```{r chart}

ggplot (data = student, aes(x = student_ratio, y = indicator, group = indicator)) +
   geom_density_ridges () +
   labs(
      title = "Student/Teacher Ratio by Education Level in Asia (2016)",
      caption = "Source:UNESCO Institute of Statistics  |  R4DS Tidy Tuesday
      Visualization: Joel Soroos @soroosj",
      x = "",
      y = "") 

```
