---
title: "Astronauts"
author: "Joel Soroos"
date: "8/31/2020"
output: html_document
---


### 1. Source data
```{r source, warning = FALSE, results = "hide", message = FALSE}

   library(knitr)
   library(tidyverse)

   astronaut_raw <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-07-14/astronauts.csv')
   
   opts_chunk$set(warning = FALSE, message = FALSE, results = "hide")
```


### 2.  Explore data
```{r explore}

   library(skimr)
   library(janitor)

   skim (astronaut_raw)
```


### 3.  Transform data
```{r transform}

   library (glue)
   
   #https://en.wikipedia.org/wiki/List_of_spaceflight-related_accidents_and_incidents
   astronaut_fatality <- astronaut_raw %>%
      filter (mission_title %in% c("Soyuz 1","Soyuz 11","STS-107", "STS-51L","STS-51-L", "STS 51-L")) %>%
      pull (name)

   astronaut <- astronaut_raw %>%
      group_by (name) %>%
      summarize (
         mission_hours = round(max (hours_mission),0),
         mission_count = max(total_number_of_missions),
         birth_year = max(year_of_birth),
         death_year = max (year_of_mission),
         space_hours = max(total_hrs_sum),
         nationality = last(nationality)
         ) %>%
      filter (name %in% astronaut_fatality) %>%
      mutate (
         life_years = glue ("{birth_year} - {death_year}")
         ) %>%
      select (name, nationality, life_years, mission_count, space_hours, mission_hours) 
```


### 4.  Visualize - indvidual charts
```{r visualize_med}

   library (here)
   # astronaut_plot <-
      ggplot (astronaut) +
         geom_text(
            aes (x = 0, y = 0, label = mission_hours),
            size = 3, hjust = 0
            ) +
         geom_text(
            aes (x = 0, y = 1, label = life_years),
            size = 3, hjust = 0
            ) +
         geom_text(
            aes (x = 1, y = 0, label = mission_count),
            size = 3, hjust = 0
            ) +
         geom_text(
            aes (x = 1, y = 1, label = nationality),
            size = 3, hjust = 1
            ) +
         theme_void() +
         facet_wrap (vars(name)) +
         ggsave(here("2020-07-14", "output", "astronaut.png"))
         #labs (title = "Overall")
```   


### 4b.  Visualize - combine plots
```{r visualize_all}

   # library (patchwork)
   # library (here)
   # 
   # astronaut_plot + astronaut_plot + plot_layout(widths = c(.05,.05)) +
   # plot_annotation (
   #    title = "Coffee Quality Institute 2017 Ratings",
   #    caption = "Visualization: Joel Soroos @soroosj  |  Data: Coffee Quality Institute via Kaggle via R4DS Tidy Tuesday",
   #    theme = theme (
   #       plot.background = element_rect(fill= "#6F4E37", color = "#6F4E37"),
   #       plot.title = element_text(hjust = 0.5, vjust = 0.5, size = 14, face = "bold", margin = margin (0,0,20,0), color = "white"),
   #       plot.subtitle = element_text (hjust = 0.5, vjust = 0, size = 10, margin = margin (0,0,25,0), color = "white"),
   #       plot.caption = element_text (hjust = 1, size = 7, margin = margin (15,0,0,0), color = "white")
   #       )
   #    ) +
   # ggsave(here("2020-07-14", "output", "astronaut.png"))
``` 